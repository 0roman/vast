notifications:
  recipients:
    - vallentin@icir.org
  email:
    on_success: change
    on_failure: change

branches:
  only:
    - master

language: cpp

compiler:
  - gcc
  - clang

env:
  global:
    - PREFIX=$HOME/builds/mavam/prefix # The prefix for dependencies.
    - PATH=$PREFIX/bin:$PATH
    - LD_LIBRARY_PATH=$PREFIX/lib
    - CONCURRENCY=4
  matrix:
    - BUILD_TYPE=--enable-debug

#matrix:
#  allow_failures:
#    - compiler: gcc

before_script:
  - mkdir -p $PREFIX/src && cd $PREFIX/src
  - sh ./.travis.$CC
  - sh ./.travis.boost
  - sh ./.travis.libcppa
  - ./configure $BUILD_TYPE --prefix=$PREFIX

script:
  - make -j $CONCURRENCY
  - make test
